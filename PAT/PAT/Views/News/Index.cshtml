@model List<ManageShop.Models.TreeViewModel>
@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<div id="example">
    <div class="demo-section k-content">
        <ul id="treeview">
            @foreach (var item in @Model)
            {
                <li data-expanded="true">
                    <span class="k-sprite folder"></span>@item.Name
                    @if (@item.Child.Count > 0)
                    {
                        <ul>
                            @foreach (var child in @item.Child)
                            {
                                <li><span class="k-sprite"></span><span style="cursor:pointer;" onclick="btnCreateOnClick(@child.ID)">@child.Name</span></li>
                            }
                        </ul>
                    }
                </li>
            }
        </ul>
    </div>
</div>
<div class="form-group row" style="margin: 20px 0px 0px 0px;text-align:left;">
    <button id="btnCreate" class="btn btn-md btn-primary" onclick="btnCreateOnClick()">
        <i class="fa fa-plus"></i>Add
    </button>
    <button id="btnSearch" class="btn btn-md btn-info" onclick="btnSearchOnClick()">
        <i class="fa fa-search"></i>Search
    </button>
    <button id="btnRepresh" class="btn btn-md btn-warning" onclick="btnRefreshOnClick()">
        <i class="fa fa-refresh"></i>Refresh
    </button>
</div>
<br />
<div id="grid_news" style="margin: 0px 20px 0px 20px"></div>
<script>
    $(document).ready(function () {
        $("#treeview").kendoTreeView();
        function additionalData() {
            return {
                CategoryID: $.trim($('#txt_username').val())
            };
        }
        $("#grid_user").kendoGrid({
            dataSource: {
                type: "json",
                transport: {
                    read: {
                        url: "../News/searchNews",
                        type: "POST",
                        dataType: "json",
                        data: additionalData,
                    }
                }
                ,
                batch: true,
                pageSize: 20,
            },
            navigatable: true,
            pageable: true,
            height: 550,
            pageable: {
                refresh: true,
                pageSizes: [10, 15, 20, 50, 100, 200, 500]
            },
            resizable: true,
            columnMenu: false,
            columns: [
                {
                    field: "ID",
                    title: "Xóa",
                    width: 50,
                    attributes: { style: "text-align:center" },
                    headerAttributes: {
                        style: "text-align:center"
                    },
                    template: '#=checkedRemoveUser(ID)#'
                },
                {
                    title: "STT",
                    template: "<span class='row-number'></span>", height: "5px", width: "60px",
                    attributes: { style: "text-align:left" }
                },
                {
                    field: "UserName",
                    title: "Username ",
                    width: 120,
                    template: "#=OpenUserDetail(UserName)#"
                },
                 {
                     field: "FullName",
                     title: "Tên đầy đủ ",
                     width: 150,
                 },

                { field: "Email", title: "Email", width: 90 },
                {
                    field: "GroupName",
                    title: "Nhóm",
                    width: 90,
                },
                {
                    field: "StatusName",
                    title: "Active",
                    width: 50,
                    attributes: { style: "text-align:center" },
                    headerAttributes: {
                        style: "text-align:center"
                    },

                },
            ],
            dataBound: function () {
                var rows = this.items();
                $(rows).each(function () {
                    var index = $(this).index() + 1;
                    var rowLabel = $(this).find(".row-number");
                    $(rowLabel).html(index);
                });
            }
            // editable: true
        });
    });
    function btnCreateOnClick(id) {
        loadpopup("../News/Detail?newsID="+id, 'ESC to Exit', '100%', false);
    }
</script>
